<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="FinanceDS" targetNamespace="http://tempuri.org/FinanceDS.xsd" xmlns:mstns="http://tempuri.org/FinanceDS.xsd" xmlns="http://tempuri.org/FinanceDS.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="0" FunctionsComponentName="ContactBalance" GeneratorFunctionsComponentClassName="ContactBalance" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" UserFunctionsComponentName="ContactBalance" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection AppSettingsObjectName="Settings" AppSettingsPropertyName="MySQLconnString" ConnectionStringObject="" IsAppSettingsProperty="true" Modifier="Assembly" Name="MySQLconnString (Settings)" ParameterPrefix="@" PropertyReference="ApplicationSettings.Cognitivo.Properties.Settings.GlobalReference.Default.MySQLconnString" Provider="MySql.Data.MySqlClient" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="CurrentAccount_CustomerTableAdapter" GeneratorDataComponentClassName="CurrentAccount_CustomerTableAdapter" Name="CurrentAccount_Customer" UserDataComponentName="CurrentAccount_CustomerTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="MySQLconnString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="Fill" GenerateMethods="Both" GenerateShortCommands="false" GeneratorGetMethodName="GetData" GeneratorSourceName="Fill" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="Fill">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT contacts.code ,contacts.name, contacts.address,venta.number,
        ps.trans_date,
ps.id_sales_invoice,(ps.debit) as DEBITO,sub.credit
from payment_schedual as ps 
inner join contacts on contacts.id_contact=ps.id_contact
inner join sales_invoice as venta on venta.id_sales_invoice = ps.id_sales_invoice
inner join(select ps.id_payment_schedual,IFNULL ((ps.credit),0) as credit from 
			payment_schedual as ps left join 
            payment_detail as pd on pd.id_payment_detail = ps.id_payment_detail left join
            app_currencyfx fx on fx.id_currencyfx = pd.id_currencyfx) as sub
            on sub.id_payment_schedual = ps.id_payment_schedual
order by contacts.name asc</CommandText>
                    <Parameters />
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="code" DataSetColumn="code" />
              <Mapping SourceColumn="name" DataSetColumn="name" />
              <Mapping SourceColumn="address" DataSetColumn="address" />
              <Mapping SourceColumn="number" DataSetColumn="number" />
              <Mapping SourceColumn="trans_date" DataSetColumn="trans_date" />
              <Mapping SourceColumn="id_sales_invoice" DataSetColumn="id_sales_invoice" />
              <Mapping SourceColumn="DEBITO" DataSetColumn="DEBITO" />
              <Mapping SourceColumn="credit" DataSetColumn="credit" />
            </Mappings>
            <Sources />
          </TableAdapter>
        </Tables>
        <Sources>
          <DbSource ConnectionRef="MySQLconnString (Settings)" DbObjectType="Unknown" GenerateShortCommands="true" GeneratorSourceName="DefaultBalance_ByCustomer" MethodsParameterType="CLR" Modifier="Public" Name="DefaultBalance_ByCustomer" QueryType="Scalar" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy" UserSourceName="DefaultBalance_ByCustomer">
            <SelectCommand>
              <DbCommand CommandType="Text" ModifiedByUser="true">
                <CommandText> select 
 if(
 fx.is_reverse, 
 sum((sch.debit * fx.sell_value) - (sch.credit * fx.sell_value)),
 sum((sch.debit / fx.sell_value) - (sch.credit / fx.sell_value)) 
 ) as Balance
 from payment_schedual as sch
 inner join app_currencyfx as fx on sch.id_currencyfx = fx.id_currencyfx
 where id_sales_invoice &gt; 0 and sch.can_calculate = 1 and id_contact = @ContactID</CommandText>
                <Parameters>
                  <Parameter AllowDbNull="false" AutogeneratedName="ContactID" ColumnName="id_contact" DataSourceName="angelius128.payment_schedual" DataTypeServer="int(11)" DbType="Int32" Direction="Input" ParameterName="@ContactID" Precision="0" ProviderType="Int32" Scale="0" Size="0" SourceColumn="id_contact" SourceColumnNullMapping="false" SourceVersion="Current" />
                </Parameters>
              </DbCommand>
            </SelectCommand>
          </DbSource>
          <DbSource ConnectionRef="MySQLconnString (Settings)" DbObjectType="Unknown" GenerateShortCommands="true" GeneratorSourceName="SpecialBalance_ByContact_Currency" MethodsParameterType="CLR" Modifier="Public" Name="SpecialBalance_ByContact_Currency" QueryType="Scalar" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy1" UserSourceName="SpecialBalance_ByContact_Currency">
            <SelectCommand>
              <DbCommand CommandType="Text" ModifiedByUser="true">
                <CommandText> select 
 (
if(fx.is_reverse, 
 ((cont.credit_limit * fx.sell_value) / @CurrencyFX),
 ((cont.credit_limit / fx.sell_value) * @CurrencyFX)) -
if(fx.is_reverse, 
 sum(((sch.debit * fx.sell_value) / @CurrencyFX) - ((sch.credit * fx.sell_value)) / @CurrencyFX),
 sum(((sch.debit / fx.sell_value) * @CurrencyFX) - ((sch.credit / fx.sell_value)) * @CurrencyFX)) 
 ) 
as Balance


 from payment_schedual as sch
 inner join contacts as cont on sch.id_contact = cont.id_contact
 inner join app_currencyfx as fx on sch.id_currencyfx = fx.id_currencyfx
 where id_sales_invoice &gt; 0 and sch.can_calculate = 1 and sch.id_contact = @ContactID</CommandText>
                <Parameters>
                  <Parameter AllowDbNull="false" AutogeneratedName="CurrencyFX" ColumnName="" DataSourceName="" DataTypeServer="unknown" DbType="Decimal" Direction="Input" ParameterName="@CurrencyFX" Precision="0" ProviderType="Decimal" Scale="0" Size="0" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                  <Parameter AllowDbNull="false" AutogeneratedName="ContactID" ColumnName="id_contact" DataSourceName="angelius128.payment_schedual" DataTypeServer="int(11)" DbType="Int32" Direction="Input" ParameterName="@ContactID" Precision="0" ProviderType="Int32" Scale="0" Size="0" SourceColumn="id_contact" SourceColumnNullMapping="false" SourceVersion="Current" />
                </Parameters>
              </DbCommand>
            </SelectCommand>
          </DbSource>
        </Sources>
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="FinanceDS" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:EnableTableAdapterManager="true" msprop:Generator_DataSetName="FinanceDS" msprop:Generator_UserDSName="FinanceDS">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="CurrentAccount_Customer" msprop:Generator_TableClassName="CurrentAccount_CustomerDataTable" msprop:Generator_TableVarName="tableCurrentAccount_Customer" msprop:Generator_RowChangedName="CurrentAccount_CustomerRowChanged" msprop:Generator_TablePropName="CurrentAccount_Customer" msprop:Generator_RowDeletingName="CurrentAccount_CustomerRowDeleting" msprop:Generator_RowChangingName="CurrentAccount_CustomerRowChanging" msprop:Generator_RowEvHandlerName="CurrentAccount_CustomerRowChangeEventHandler" msprop:Generator_RowDeletedName="CurrentAccount_CustomerRowDeleted" msprop:Generator_RowClassName="CurrentAccount_CustomerRow" msprop:Generator_UserTableName="CurrentAccount_Customer" msprop:Generator_RowEvArgName="CurrentAccount_CustomerRowChangeEvent">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="code" msprop:Generator_ColumnVarNameInTable="columncode" msprop:Generator_ColumnPropNameInRow="code" msprop:Generator_ColumnPropNameInTable="codeColumn" msprop:Generator_UserColumnName="code" type="xs:string" minOccurs="0" />
              <xs:element name="name" msprop:Generator_ColumnVarNameInTable="columnname" msprop:Generator_ColumnPropNameInRow="name" msprop:Generator_ColumnPropNameInTable="nameColumn" msprop:Generator_UserColumnName="name" type="xs:string" />
              <xs:element name="address" msprop:Generator_ColumnVarNameInTable="columnaddress" msprop:Generator_ColumnPropNameInRow="address" msprop:Generator_ColumnPropNameInTable="addressColumn" msprop:Generator_UserColumnName="address" type="xs:string" minOccurs="0" />
              <xs:element name="number" msprop:Generator_ColumnVarNameInTable="columnnumber" msprop:Generator_ColumnPropNameInRow="number" msprop:Generator_ColumnPropNameInTable="numberColumn" msprop:Generator_UserColumnName="number" type="xs:string" minOccurs="0" />
              <xs:element name="trans_date" msprop:Generator_ColumnVarNameInTable="columntrans_date" msprop:Generator_ColumnPropNameInRow="trans_date" msprop:Generator_ColumnPropNameInTable="trans_dateColumn" msprop:Generator_UserColumnName="trans_date" type="xs:dateTime" />
              <xs:element name="id_sales_invoice" msprop:Generator_ColumnVarNameInTable="columnid_sales_invoice" msprop:Generator_ColumnPropNameInRow="id_sales_invoice" msprop:Generator_ColumnPropNameInTable="id_sales_invoiceColumn" msprop:Generator_UserColumnName="id_sales_invoice" type="xs:int" minOccurs="0" />
              <xs:element name="DEBITO" msprop:Generator_ColumnVarNameInTable="columnDEBITO" msprop:Generator_ColumnPropNameInRow="DEBITO" msprop:Generator_ColumnPropNameInTable="DEBITOColumn" msprop:Generator_UserColumnName="DEBITO" type="xs:decimal" />
              <xs:element name="credit" msprop:Generator_ColumnVarNameInTable="columncredit" msprop:Generator_ColumnPropNameInRow="credit" msprop:Generator_ColumnPropNameInTable="creditColumn" msprop:Generator_UserColumnName="credit" type="xs:decimal" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="PendingAccounts" msprop:Generator_TableClassName="PendingAccountsDataTable" msprop:Generator_TableVarName="tablePendingAccounts" msprop:Generator_RowChangedName="PendingAccountsRowChanged" msprop:Generator_TablePropName="PendingAccounts" msprop:Generator_RowDeletingName="PendingAccountsRowDeleting" msprop:Generator_RowChangingName="PendingAccountsRowChanging" msprop:Generator_RowEvHandlerName="PendingAccountsRowChangeEventHandler" msprop:Generator_RowDeletedName="PendingAccountsRowDeleted" msprop:Generator_RowClassName="PendingAccountsRow" msprop:Generator_UserTableName="PendingAccounts" msprop:Generator_RowEvArgName="PendingAccountsRowChangeEvent">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Contact" msprop:Generator_ColumnVarNameInTable="columnContact" msprop:Generator_ColumnPropNameInRow="Contact" msprop:Generator_ColumnPropNameInTable="ContactColumn" msprop:Generator_UserColumnName="Contact" type="xs:string" minOccurs="0" />
              <xs:element name="Number" msprop:Generator_ColumnVarNameInTable="columnNumber" msprop:Generator_ColumnPropNameInRow="Number" msprop:Generator_ColumnPropNameInTable="NumberColumn" msprop:Generator_UserColumnName="Number" type="xs:string" minOccurs="0" />
              <xs:element name="Conditions" msprop:Generator_ColumnVarNameInTable="columnConditions" msprop:Generator_ColumnPropNameInRow="Conditions" msprop:Generator_ColumnPropNameInTable="ConditionsColumn" msprop:Generator_UserColumnName="Conditions" type="xs:string" minOccurs="0" />
              <xs:element name="Contract" msprop:Generator_ColumnVarNameInTable="columnContract" msprop:Generator_ColumnPropNameInRow="Contract" msprop:Generator_ColumnPropNameInTable="ContractColumn" msprop:Generator_UserColumnName="Contract" type="xs:string" minOccurs="0" />
              <xs:element name="ExpiryDate" msprop:Generator_ColumnVarNameInTable="columnExpiryDate" msprop:Generator_ColumnPropNameInRow="ExpiryDate" msprop:Generator_ColumnPropNameInTable="ExpiryDateColumn" msprop:Generator_UserColumnName="ExpiryDate" type="xs:string" minOccurs="0" />
              <xs:element name="CurrencyName" msprop:Generator_ColumnVarNameInTable="columnCurrencyName" msprop:Generator_ColumnPropNameInRow="CurrencyName" msprop:Generator_ColumnPropNameInTable="CurrencyNameColumn" msprop:Generator_UserColumnName="CurrencyName" type="xs:string" minOccurs="0" />
              <xs:element name="Rate" msprop:Generator_ColumnVarNameInTable="columnRate" msprop:Generator_ColumnPropNameInRow="Rate" msprop:Generator_ColumnPropNameInTable="RateColumn" msprop:Generator_UserColumnName="Rate" type="xs:decimal" minOccurs="0" />
              <xs:element name="Value" msprop:Generator_ColumnVarNameInTable="columnValue" msprop:Generator_ColumnPropNameInRow="Value" msprop:Generator_ColumnPropNameInTable="ValueColumn" msprop:Generator_UserColumnName="Value" type="xs:decimal" minOccurs="0" />
              <xs:element name="Paid" msprop:Generator_ColumnVarNameInTable="columnPaid" msprop:Generator_ColumnPropNameInRow="Paid" msprop:Generator_ColumnPropNameInTable="PaidColumn" msprop:Generator_UserColumnName="Paid" type="xs:decimal" minOccurs="0" />
              <xs:element name="Balance" msprop:Generator_ColumnVarNameInTable="columnBalance" msprop:Generator_ColumnPropNameInRow="Balance" msprop:Generator_ColumnPropNameInTable="BalanceColumn" msprop:Generator_UserColumnName="Balance" type="xs:decimal" minOccurs="0" />
              <xs:element name="TransDate" msprop:Generator_ColumnVarNameInTable="columnTransDate" msprop:Generator_ColumnPropNameInRow="TransDate" msprop:Generator_ColumnPropNameInTable="TransDateColumn" msprop:Generator_UserColumnName="TransDate" type="xs:string" minOccurs="0" />
              <xs:element name="Code" msprop:Generator_ColumnVarNameInTable="columnCode" msprop:Generator_ColumnPropNameInRow="Code" msprop:Generator_ColumnPropNameInTable="CodeColumn" msprop:Generator_UserColumnName="Code" type="xs:string" minOccurs="0" />
              <xs:element name="GovID" msprop:Generator_ColumnVarNameInTable="columnGovID" msprop:Generator_ColumnPropNameInRow="GovID" msprop:Generator_ColumnPropNameInTable="GovIDColumn" msprop:Generator_UserColumnName="GovID" type="xs:string" minOccurs="0" />
              <xs:element name="Comment" msprop:Generator_ColumnVarNameInTable="columnComment" msprop:Generator_ColumnPropNameInRow="Comment" msprop:Generator_ColumnPropNameInTable="CommentColumn" msprop:Generator_UserColumnName="Comment" type="xs:string" minOccurs="0" />
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema>